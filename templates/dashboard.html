<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{font-family:Arial;padding:10px}
button{margin:2px}
iframe{width:100%;height:250px}
</style>
</head>
<body>

<h3>Python Script Panel</h3>

<form action="/upload" method="post" enctype="multipart/form-data">
<input type="file" name="file">
<button>Upload (py / zip)</button>
</form>

<hr>

{% for f in files %}
<div>
<b>{{f}}</b>
<button onclick="run('{{f}}')">Run</button>
<button onclick="stop('{{f}}')">Stop</button>
<button onclick="del('{{f}}')">Delete</button>
{% if f in running %} ðŸŸ¢ {% endif %}
<iframe src="/logs/{{f}}"></iframe>
</div>
<hr>
{% endfor %}

<script>
function run(n){fetch("/run",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n})})}
function stop(n){fetch("/stop",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n})})}
function del(n){fetch("/delete",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n})}).then(()=>location.reload())}
</script>

</body>
</html>
