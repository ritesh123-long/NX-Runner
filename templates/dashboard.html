<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/static/style.css">
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>

<div class="card">
  <h3>üöÄ Python Script Manager</h3>
  <form action="/upload" method="post" enctype="multipart/form-data" class="row">
    <input type="file" name="file">
    <button>Upload</button>
  </form>
</div>

{% for f in files %}
<div class="card">
  <h3>
    {{f}}
    {% if f in running %}
      <span class="running">‚óè RUNNING</span>
    {% else %}
      <span class="stopped">‚óè STOPPED</span>
    {% endif %}
  </h3>

  <div class="row">
    <button onclick="run('{{f}}')">Run</button>
    <button class="stop" onclick="stop('{{f}}')">Stop</button>
    <button class="delete" onclick="del('{{f}}')">Delete</button>
  </div>

  <br>
  <iframe src="/logs/{{f}}"></iframe>
</div>
{% endfor %}

<script>
function run(n){
 fetch("/run",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n})})
}
function stop(n){
 fetch("/stop",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n})})
}
function del(n){
 fetch("/delete",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n})})
 .then(()=>location.reload())
}
</script>

</body>
</html>function del(n){fetch("/delete",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n})}).then(()=>location.reload())}
</script>

</body>
</html>
